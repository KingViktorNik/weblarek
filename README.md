# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/main.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```
# Интернет-магазин «Web-Larёk»
«Web-Larёk» — это интернет-магазин с товарами для веб-разработчиков, где пользователи могут просматривать товары, добавлять их в корзину и оформлять заказы. Сайт предоставляет удобный интерфейс с модальными окнами для просмотра деталей товаров, управления корзиной и выбора способа оплаты, обеспечивая полный цикл покупки с отправкой заказов на сервер.

## Архитектура приложения

Код приложения разделен на слои согласно парадигме MVP (Model-View-Presenter), которая обеспечивает четкое разделение ответственности между классами слоев Model и View. Каждый слой несет свой смысл и ответственность:

Model - слой данных, отвечает за хранение и изменение данных.  
View - слой представления, отвечает за отображение данных на странице.  
Presenter - презентер содержит основную логику приложения и  отвечает за связь представления и данных.

Взаимодействие между классами обеспечивается использованием событийно-ориентированного подхода. Модели и Представления генерируют события при изменении данных или взаимодействии пользователя с приложением, а Презентер обрабатывает эти события используя методы как Моделей, так и Представлений.

### Базовый код

#### Класс Component
Является базовым классом для всех компонентов интерфейса.
Класс является дженериком и принимает в переменной `T` тип данных, которые могут быть переданы в метод `render` для отображения.

Конструктор:  
  - `constructor(container: HTMLElement)` - принимает ссылку на DOM элемент за отображение, которого он отвечает.

Поля класса:  
  - `container: HTMLElement` - поле для хранения корневого DOM элемента компонента.

Методы класса:  
  - `render(data?: Partial<T>): HTMLElement` - Главный метод класса. Он принимает данные, которые необходимо отобразить в интерфейсе, записывает эти данные в поля класса и возвращает ссылку на DOM-элемент. Предполагается, что в классах, которые будут наследоваться от `Component` будут реализованы сеттеры для полей с данными, которые будут вызываться в момент вызова `render` и записывать данные в необходимые DOM элементы.  
  - `setImage(element: HTMLImageElement, src: string, alt?: string): void` - утилитарный метод для модификации DOM-элементов `<img>`


#### Класс Api
Содержит в себе базовую логику отправки запросов.

Конструктор:  
  - `constructor(baseUrl: string, options: RequestInit = {})` - В конструктор передается базовый адрес сервера и опциональный объект с заголовками запросов.

Поля класса:  
  - `baseUrl: string` - базовый адрес сервера  
  - `options: RequestInit` - объект с заголовками, которые будут использованы для запросов.

Методы:
  - `get(uri: string): Promise<object>` - выполняет GET запрос на переданный в параметрах ендпоинт и возвращает промис с объектом, которым ответил сервер  
  - `post(uri: string, data: object, method: ApiPostMethods = 'POST'): Promise<object>` - принимает объект с данными, которые будут переданы в JSON в теле запроса, и отправляет эти данные на ендпоинт переданный как параметр при вызове метода. По умолчанию выполняется `POST` запрос, но метод запроса может быть переопределен заданием третьего параметра при вызове.  
  - `handleResponse(response: Response): Promise<object>` - защищенный метод проверяющий ответ сервера на корректность и возвращающий объект с данными полученный от сервера или отклоненный промис, в случае некорректных данных.

#### Класс EventEmitter
Брокер событий реализует паттерн "Наблюдатель", позволяющий отправлять события и подписываться на события, происходящие в системе. Класс используется для связи слоя данных и представления.

Конструктор класса не принимает параметров.

Поля класса:  
  - `_events: Map<string | RegExp, Set<Function>>)` -  хранит коллекцию подписок на события. Ключи коллекции - названия событий или регулярное выражение, значения - коллекция функций обработчиков, которые будут вызваны при срабатывании события.

Методы класса:  
  - `on<T extends object>(event: EventName, callback: (data: T) => void): void` - подписка на событие, принимает название события и функцию обработчик.  
  - `emit<T extends object>(event: string, data?: T): void` - инициализация события. При вызове события в метод передается название события и объект с данными, который будет использован как аргумент для вызова обработчика.  
  - `trigger<T extends object>(event: string, context?: Partial<T>): (data: T) => void` - возвращает функцию, при вызове которой инициализируется требуемое в параметрах событие с передачей в него данных из второго параметра.

## Данные
### Типы и интерфейс 
#### ApiPostMethods
##### Тип: 
  объединение ('POST' | 'PUT' | 'DELETE')
##### Назначение: 
  перечисление допустимых HTTP‑методов для POST‑запросов.

#### IApi
##### Интерфейс: 
  базовый API для взаимодействия с сервером.
##### Методы:
  - `get<T extends object>(uri: string): Promise<T>` — GET‑запрос.
  - `post<T extends object>(uri: string, data: object, method?: ApiPostMethods): Promise<T>` — POST‑запрос с указанием метода.

#### IProduct
Итерфейс `IProduct` описывает структуру товара в каталоге. предназначен для хранения полной информации о товаре. Гарантирует единообразие структуры данных при получении с сервера, хранении и передаче между компонентами.
##### Интерфейс:
  описание товара в каталоге.
##### Поля:
  - `id: string` — Уникальный идентификатор товара. Используется для однозначной идентификации в системе, поиска и связывания с другими сущностями.
  - `title: string` — Краткое наименование товара. Отображается в списках товаров, карточках, результатах поиска и других интерфейсных элементах.
  - `description: string` — Подробное текстовое описание товара, включающее характеристики, особенности, технические параметры и другую значимую информацию для покупателя.
  - `image: string` — URL‑адрес изображения товара. Может быть относительным или абсолютным путём к файлу изображения.
  - `category: string` — Название категории, к которой принадлежит товар. Используется для группировки товаров и навигации в каталоге.
  - `price: number | null` — Текущая цена товара в числовом формате. Может принимать значение null, если цена временно недоступна или не определена.

#### TProductUrlButtonText
##### Тип: 
  объединение `Partial<IProduct>` & `Partial<IUrlAndButtonText>`
##### Назначение: 
  данные для карточки товара (включая URL изображения и текст кнопки).

#### TPayment
##### Тип:
  объединение ('online' | 'cash' | '')
##### Назначение: 
  допустимые способы оплаты.

#### ICustomer
##### Интерфейс:
  данные покупателя.
##### Поля:
  - `payment: TPayment` — способ оплаты;
  - `email: string` — email;
  - `phone: string` — телефон;
  - `address: string` — адрес доставки.

#### IOrderRequest
##### Интерфейс:
  запрос на оформление заказа (расширяет ICustomer).
##### Дополнительные поля:
  - `total: number` — итоговая сумма;
  - `items: string[]` — массив ID товаров.

#### ISubmitAndGetIdTotal
##### Интерфейс:
  ответ сервера после отправки заказа.
##### Поля:
  - `id: string` — ID заказа;
  - `total: number` — сумма заказа.

#### IUrlAndButtonText
##### Интерфейс:
  дополнительная информация для карточки товара.
##### Поля:
  - `imageUrl: string` — URL изображения;
  - `buttonTextContent: string` — текст кнопки.

#### IItemIndex
##### Интерфейс:
  порядковый номер элемента.
##### Поле:
  - `itemIndex: string`

#### ICardActions
##### Интерфейс:
  действия для карточки товара.
##### Метод:
  - `onClick(): void` — обработчик клика.

#### IFormError
##### Интерфейс:
  ошибки валидации формы
##### Наследование:
  расширяет `ICustomer`
##### Дополнительное поле: 
  - `error: string` — сообщение об ошибке.

#### IProductDOMList
##### Интерфейс:
  список DOM‑элементов товаров
##### Поле:
  - `productItems: HTMLElement[]` — массив HTML‑элементов карточек.

#### IOrderTotal
##### Интерфейс:
  итоговая сумма заказа.
##### Поле: 
  - `orderTotal: number`.

#### ISuccess
##### Интерфейс:
  данные успешного ответа
##### Поле:
  - `description: string` — текстовое сообщение об успехе.

#### TBasketListAndOrderTotal
##### Тип:
  - Partial<`IProductDOMList`> & Partial<`IOrderTotal`>
##### Назначение:
  комбинированные данные для отображения корзины и суммы.

#### TFormData
##### Тип:
  - Partial<`ICustomer`>
##### Назначение:
  частичное заполнение данных покупателя.

#### TSequentialProduct
##### Тип:
  - Partial<`IProduct`> & Partial<`IItemIndex`>
##### Назначение:
  товар с порядковым номером (например, в списке корзины).

#### TSuccessData
##### Тип:
  - Partial<`ISuccess`>
##### Назначение:
  частичные данные успешного ответа.

#### TCustomerErrors
##### Тип:
  - Partial<`ICustomer`>
##### Назначение:
  словарь ошибок валидации полей покупателя.
##### Ключи: 
  названия полей ('email', 'phone' и т.д.).
##### Значения:
  текстовые сообщения об ошибках.

### Модели данных
#### Класс ProductCatalog
Класс `ProductCatalog` отвечает за хранение и управление каталогом товаров. Содержит полный список доступных товаров и текущий выбранный товар для детального просмотра.

Конструктор класса не принимает параметров.

Поля класса:  
  - `productList: IProduct[]` — Предназначен для хранения скписка товара.
  - `selectedProduct: IProduct | null`— Текущий выбранный товар для отображения в модальном окне (может быть null, если товар не выбран).

Методы класса:  
  - `setProductList(products: IProduct[]): void` — Сохраняет переданный массив товаров в поле products.
  - `getProductList(): IProduct[]` — Возвращает полный список товаров из каталога. Возвращает массив товаров IProduct[].
  - `getProductById(id: string): IProduct | undefined` — Находит и возвращает товар по его уникальному идентификатору. Параметр id (string) — идентификатор товара. Возвращает товар типа IProduct или undefined, если товар не найден.
  - `setSelectedProduct(product: IProduct): void` — Сохраняет переданный товар в поле selectedProduct для детального отображения. Параметр product (IProduct) — выбранный товар.
  - `getSelectedProduct(): IProduct | null` — Возвращает товар, выбранный для подробного просмотра. Возвращает текущий выбранный товар (IProduct) или null.

#### Класс ShoppingCart
Класс `ShoppingCart` отвечает за управление корзиной покупок. Хранит список товаров, выбранных пользователем для покупки, и предоставляет методы для работы с корзиной.

Конструктор класса не принимает параметров.

Поля класса:  
  - `productList: IProduct[]` — Массив товаров, добавленных в корзину.

Методы класса:  
  - `getList(): IProduct[]` — Возвращает все товары(IProduct[]), находящиеся в корзине.
  - `add(product: IProduct): void` — Добавляет переданный товар в массив items. Если товар уже есть в корзине, не добавляет дубликат. Параметр product (IProduct) — товар для добавления.
  - `remove(product: IProduct): void` — Удаляет переданный товар из массива items по идентификатору. Параметр product (IProduct) — товар для удаления.
  - `clear(): void` — Очищает корзину, удаляя все товары из массива items.
  - `getTotalPrice(): number` — Считает и возвращает сумму цен всех товаров в корзине. Товары с price === null не учитываются. Общую стоимость товаров в корзине (number).
  - `getProductCount(): number` — Возвращает число товаров(number), находящихся в корзине.
  - `hasProduct(id: string): boolean` — Проверяет наличие товара в корзине по его идентификатору. Параметр id (string) — идентификатор товара.Возвращает true, если товар с указанным id есть в корзине; false — если нет.

#### Класс Customer
Класс `Customer` хранит и управляет данными покупателя, необходимыми для оформления заказа. Обеспечивает валидацию данных перед отправкой на сервер.

Конструктор класса не принимает параметров.

  - `type TBuyerErrors = Partial<Record<keyof ICustomer, string>>;` — Описывает структуру объекта с сообщениями об ошибках для полей объекта типа `ICustomer`. Используется для валидации данных и отображения пользовательских сообщений об ошибках.

Поля класса:
  - `payment: TPayment | null` — Выбранный способ оплаты;  
  - `email: string` — Адрес электронной почты покупателя.
  - `phone: string` — Контактный номер телефона покупателя.
  - `address: string` — Физичиский адрес покупателя.

Методы класса:  
  - `setData(data: Partial<ICustomer>): void` — Обновляет только те поля, которые переданы в объекте data, не затрагивая остальные. Позволяет обновлять данные поэтапно. Параметр data (`Partial<ICustomer>`) — объект с частичными данными покупателя.
  - `getData(): ICustomer` — Возвращает все сохранённые данные покупателя в виде объекта ICustomer.
  - `clearData(): void` — Очищает все данные покупателя, устанавливая поля в пустые или null значения.
  - `validate(): TBuyerErrors | null` — Проверяет все поля на валидность (непустота). Возвращает `TBuyerErrors` с сообщениями об ошибках для невалидных полей. Возвращает null, если все поля валидны;
Пример возвращаемого значения:
  - `typescript`
    `{`
        `payment: 'Не выбран вид оплаты',`
        `email: 'Укажите email'`
    `}`
Означает, что поля payment и email не заполнены, а phone и address валидны.
Правила валидации:
  - `payment`: не null;
  - `email`: не пустая строка;
  - `phone`: не пустая строка;
  - `address`: не пустая строка.

## Слой коммуникации
#### Интерфейс IOrderRequest
Интерфейс `IOrderRequest` описывает структуру данных для запроса на оформление заказа в интернет‑магазине. Включает как сведения о покупателе (наследуемые от ICustomer), способе оплаты, составе заказа и итоговой сумме.

##### Наследование
Расширяет интерфейс `ICustomer`, поэтому содержит все его поля плюс дополнительные.

Поля интерфейса:
  - `payment: TPayment` — Указывает способ оплаты заказа. TPayment (объединённый тип: 'online' | 'cash' | ''). Наследуется от `ICustomer`.
  - `email: string` — Электронная почта покупателя для связи. Ожидается валидный email‑формат (проверка на уровне бизнес‑логики). Наследуется от `ICustomer`.
  - `phone: string` — Контактный телефон покупателя для уведомлений и подтверждения заказа. Наследуется от `ICustomer`.
  - `address: string` — Адрес доставки заказа. Наследуется от `ICustomer`.
  - `total: number` — итоговая сумма заказа в денежных единицах (например, рублях).
  - `items: string[]` — список идентификаторов или названий товаров в заказе.

#### Интерфейс ISubmitAndGetIdTotal
Интерфейс, описывающий ответ от сервера после отправки данных. Содержит идентификатор операции и итоговую сумму.

Поля интерфейса:
  - `id: string` — строковый идентификатор операции.
  - `total: number` — числовое значение итоговой суммы.

### Класс ServerApi
Класс `ServerApi` обеспечивает взаимодействие приложения с серверным API. Использует композицию с базовым классом Api для выполнения HTTP‑запросов. 
Отвечает за:
  получение каталога товаров (GET /product/);
  отправку данных заказа (POST /order/).

  - `constructor(api: Api)`

Поля класса:
  - `api: IApi` — сохранённый экземпляр Api для выполнения запросов.

Методы:
  - `getProducts(): Promise<IProduct[]>` — Выполняет GET‑запрос к эндпоинту /product/, получает каталог товаров и возвращает его(IProduct[]).
  - `sendOrder(orderData: { buyer: IBuyer; items: IProduct[] }): Promise<object>` — Отправляет данные заказа на сервер через POST‑запрос к /order/. Возвращает промис с ответом сервера (тип object).

### Класс OrderManager
  - `OrderManager` — класс, управляющий процессом оформления и отправки заказа. Обеспечивает формирование данных заказа на основе информации о клиенте и содержимом корзины, отправку заказа через API, обработку успешного завершения заказа (показ модального окна с подтверждением, очистку корзины и данных клиента, обновление счётчика в шапке), обработку ошибок при отправке заказа.

Используемые интерфейсы, типы и классы:
  - `IOrderRequest` - Интерфейс, описывающий структуру запроса на оформление заказа. Импортируется из `../../types`.
  - `ISubmitAndGetIdTotal` - Интерфейс, описывающий ответ от API после отправки заказа (включая итоговую сумму). Импортируется из `../../types`.
  - `CURRENCY` - Константа, определяющая валюту для отображения цены. Импортируется из `../../utils/constants`.
  - `Customer` - Модель, хранящая данные покупателя. Импортируется из `../models/Customer`.
  - `ShoppingCart` - Модель, хранящая список товаров в корзине. Импортируется из `../models/ShoppingCart`.
  - `SuccessForm` - Компонент, отображающий сообщение об успешном завершении заказа. Импортируется из `../views/forms/SuccessForm`.
  - `Header` - Компонент шапки приложения (отображает счётчик товаров в корзине). Импортируется из `../views/Header`.
  - `Modal` - Компонент модального окна. Импортируется из `../views/Modal`.
  - `ApiService` - Сервис для взаимодействия с API (отправка заказа). Импортируется из `./ApiService`.

Конструктор:
  - `constructor(`
    - `private apiService: ApiService,` — сервис для взаимодействия с API;
    - `private customer: Customer,`  — экземпляр модели клиента;
    - `private shoppingCart: ShoppingCart,` — экземпляр модели корзины покупок;
    - `private modal: Modal,` — компонент модального окна;
    - `private successForm: SuccessForm,` — компонент формы успеха;
    - `private header: Header` — компонент шапки приложения.
  `)` — Сохраняет переданные зависимости в приватных полях класса для дальнейшего использования.

Поля класса
  - `apiService: ApiService` - Сервис для взаимодействия с API (отправка заказа).
  - `customer: Customer` - Экземпляр модели клиента (хранит данные покупателя).
  - `shoppingCart: ShoppingCart` - Экземпляр модели корзины покупок (хранит список товаров).
  - `modal: Modal` - Компонент модального окна.
  - `successForm: SuccessForm` - Компонент формы успеха (отображает сообщение о завершении заказа).
  - `header: Header` - Компонент шапки приложения (для обновления счётчика товаров).

Методы:
  - `createOrderRequest(): IOrderRequest` - Формирует объект запроса на заказ на основе данных клиента и содержимого корзины. Возвращаемое значение `IOrderRequest` объект запроса на заказ, содержащий данные клиента, массив идентификаторов товаров в заказе (items), общую стоимость заказа (total)
  - `submitOrder(): Promise<void>` - Отправляет заказ через API. При успешном выполнении вызывает `handleSuccess`, при ошибке — `handleError`.
  - `handleSuccess(order: ISubmitAndGetIdTotal): void` - Обрабатывает успешный ответ от API после отправки заказа.
  - `handleError(error: Error): void` -Обрабатывает ошибку, возникшую при отправке заказа. Выводит ошибку в консоль для отладки.

## Описание классов слоя Представления (View)
### Класс Header
Класс `Header` представляет собой компонент шапки приложения, отвечающий за:
отображение количества товаров в корзине;
 - обработку клика по кнопке корзины;
 - обновление счётчика товаров;
 - сброс счётчика до нуля.
Наследует класс `Component<IHeader>`.

Используемые интерфейсы, типы и константы:
  - `IHeader` - Интерфейс, описывающий данные для компонента Header. Содержит поле counter (количество товаров в корзине). 
  - `EventTopic` - Константа, определяющая события. Импортируется из `../../utils/constants`.
  - `ensureElement` - Утилитарная функция для поиска и проверки DOM‑элементов. Импортируется из `../../utils/utils`.
  - `Component<IHeader>` - Базовый класс для компонентов интерфейса. Импортируется из `../base/Component`.
  - `IEvents` - Интерфейс системы событий для коммуникации между компонентами. Импортируется из `../base/Events`.

Конструктор:
  - `constructor(private events: IEvents, container: HTMLElement)` — В конструктор передается `events: IEvents` экземпляр системы событий для коммуникации между компонентами, `container: HTMLElement` — корневой элемент DOM, в котором размещается компонент.

Поля класса:
  - `counterElement: HTMLElement` — Элемент DOM, отображающий количество товаров в корзине. Соответствует селектору `header__basket-counter`.
  - `basketButton: HTMLButtonElement` — Кнопка открытия корзины. Соответствует селектору `header__basket`.

Методы:
  - `setCounter(value: number): void` — Устанавливает новое значение счётчика товаров в корзине.
В параметрах `value: number` новое значение счётчика (количество товаров).
  - `counterClear(): void` — Сбрасывает значение счётчика товаров в корзине до нуля.

### Абстрактный базовый класс Card
  - `Card` — абстрактный базовый класс для компонентов карточек товаров. Обеспечивает унифицированное отображение основной информации о товаре: название,цена с валютой. Предназначен для наследования конкретными реализациями карточек (например, для каталога, корзины и т. д.). Наследует класс `Component<IProduct>`.

Используемые интерфейсы и типы:
  - `IProduct` - Интерфейс, описывающий структуру товара. Импортируется из `../../../types`.
  - `CURRENCY`, `PRICE_UNAVAILABLE` - Константы, определяющие валюту для отображения цены, текст для случая когда цена недоступна. Импортируются из `../../../utils/constants`.
  - `ensureElement` - Утилитарная функция для поиска и проверки DOM‑элементов. Импортируется из `../../../utils/utils`.
  - `Component<IProduct>` - Базовый класс для компонентов интерфейса. Импортируется из `../../base/Component`.

Конструктор:
  - `constructor(container: HTMLElement)` - `container: HTMLElement` — корневой элемент DOM, в котором размещается компонент. Вызывает конструктор базового класса `super(container)`. Инициализирует `titleElement` и `priceElement` с помощью функции `ensureElement`, выполняя поиск элементов внутри `container` по селекторам `card__title` и `card__price` соответственно.

Поля класса:
  - `titleElement: HTMLElement` - Элемент DOM, отображающий название товара. Соответствует селектору `card__title` внутри контейнера компонента.
  - `priceElement: HTMLElement` - Элемент DOM, отображающий цену товара с валютой. Соответствует селектору `card__price` внутри контейнера компонента.
  - `container: HTMLElement` - (унаследовано от `Component`) Корневой элемент DOM, в котором размещается компонент.

Методы:
  - `render(data?: Partial<IProduct>): HTMLElement` - Отрисовывает компонент с переданными данными о товаре.

### Класс ProductCard
  - `ProductCard` — компонент карточки товара, расширяющий базовый класс Card. Добавляет отображение: категории товара, изображения товара. Поддерживает обработку клика по карточке через переданные действия (открытие детальной страницы товара). Наследует класс `Card`.

Используемые интерфейсы, типы и константы:
  - `ICardActions` - Интерфейс, описывающий доступные действия для карточки (включая обработчик клика onClick) Импортируется из `../../../types`.
  - `TProductUrlButtonText` - Тип, описывающий частично заполненные данные о товаре, включая URL‑путь к изображению. Импортируется из `../../../types`.
  - `categoryMap`- Константа‑объект, содержащий соответствие ключей категорий их текстовым представлениям. Импортируется из `../../../utils/constants`.
  - `ensureElement` - Утилитарная функция для поиска и проверки DOM‑элементов. Импортируется из `../../../utils/utils`.
  - `Card` - Базовый класс для компонентов карточек товаров. Импортируется из `./cards`.

Конструктор:
  - `constructor(container: HTMLElement, actions?: ICardActions)` - `container: HTMLElement` корневой элемент DOM, в котором размещается компонент. `actions?: ICardActions` объект с действиями для карточки (опционально), в частности, обработчик клика `onClick`.

Поля класса:
  - `cardCategoryElement: HTMLElement` - Элемент DOM, отображающий категорию товара. Соответствует селектору `.card__category` внутри контейнера компонента.
  - `cardImageElement: HTMLImageElement` - Элемент DOM для отображения изображения товара. Соответствует селектору `.card__image` внутри контейнера компонента.
  - `container: HTMLElement` - (унаследовано от `Card`) Корневой элемент DOM, в котором размещается компонент.
  - `titleElement: HTMLElement`, `priceElement: HTMLElement` (унаследованы от `Card`) Элементы для отображения названия и цены товара соответственно.

Методы:
  - `render(data?: Partial<TProductUrlButtonText>): HTMLElement` - Отрисовывает компонент с переданными данными о товаре.

### Класс PreviewCard
  - `PreviewCard` — компонент предпросмотра карточки товара, расширяющий `ProductCard`. Добавляет текстовое описание товара, кнопку действия с динамическим текстом и управлением активностью, обработку клика по кнопке для отправки события о выборе товара. Используется для детального отображения товара перед покупкой. Наследует класс `ProductCard`.

Используемые интерфейсы, типы и константы:
  - `TProductUrlButtonText` - Тип, описывающий частично заполненные данные о товаре, включая текст кнопки и URL изображения. Импортируется из `../../../types`.
  - `EventTopic` - Константа, определяющая события. Импортируется из `../../../utils/constants`.
  - `ensureElement` - Утилитарная функция для поиска и проверки DOM‑элементов. Импортируется из `../../../utils/utils`.
  - `IEvents` - Интерфейс системы событий для коммуникации между компонентами. Импортируется из `../../base/Events`.
  - `ProductCard` - Базовый класс для компонентов карточек товаров. Импортируется из `./ProductCard`.

Конструктор:
  - `constructor(private event: IEvents, container: HTMLElement)` - `event: IEvents` экземпляр системы событий для коммуникации между компонентами, `container: HTMLElement` корневой элемент DOM, в котором размещается компонент.

Поля класса:
  - `cardButtonElement: HTMLButtonElement` - Элемент DOM, кнопка действия в карточке товара. Соответствует селектору `card__button` внутри контейнера компонента.
  - `cardTextElement: HTMLElement` - Элемент DOM, текстовое описание товара. Соответствует селектору `card__text` внутри контейнера компонента.
  - `event: IEvents` - Экземпляр системы событий для коммуникации между компонентами.
Поля, унаследованные от `ProductCard` - `cardCategoryElement: HTMLElement`, `cardImageElement:HTMLImageElement`, `container: HTMLElement`, `titleElement: HTMLElement`, `priceElement: HTMLElement`.

Методы:
  - `updateButtonState(status: number | null | undefined): void` - Устанавливает состояние активности кнопки в зависимости от наличия цены. `status: number | null | undefined` — значение цены товара (если есть). Если `status` отсутствует (`null` или `undefined`), кнопка блокируется. Если `status` есть (число), кнопка разблокируется.
  - `render(data?: Partial<TProductUrlButtonText>): HTMLElement` - Отрисовывает компонент с переданными данными о товаре.

### Класс BasketCard
  - `BasketCard` — компонент карточки товара в корзине, расширяющий базовый класс `Card`. Добавляет порядковый номер товара в корзине, кнопку удаления товара из корзины. Предназначен для отображения товаров в составе корзины покупок. Наследует класс `Card`.

Используемые интерфейсы и типы:
  - `ICardActions` - Интерфейс, описывающий доступные действия для карточки (включая обработчик клика onClick). Импортируется из `../../../types`.
  - `TSequentialProduct` - Тип, описывающий данные о товаре в корзине, включая порядковый номер. Импортируется из `../../../types`.
  - `ensureElement` - Утилитарная функция для поиска и проверки DOM‑элементов. Импортируется из `../../../utils/utils`.
  - `Card` - Базовый класс для компонентов карточек товаров. Импортируется из `./cards`.

Конструктор:
  - `constructor(container: HTMLElement, actions?: ICardActions)` - `container: HTMLElement` корневой элемент DOM, в котором размещается компонент, `actions?: ICardActions` — объект с действиями для карточки (опционально), в частности, обработчик клика `onClick` для кнопки удаления.

Поля класса:
  - `basketItemIndexElement: HTMLElement` - Элемент DOM, отображающий порядковый номер товара в корзине. Соответствует селектору `basket__item-index` внутри контейнера компонента.
  - `basketItemDeleteElement: HTMLButtonElement` - Элемент DOM — кнопка удаления товара из корзины. Соответствует селектору `basket__item-delete` внутри контейнера компонента.
  - `container: HTMLElement` - (унаследовано от `Card`) Корневой элемент DOM, в котором размещается компонент.
  - `titleElement: HTMLElement`, `priceElement: HTMLElement` - (унаследованы от Card) Элементы для отображения названия и цены товара соответственно.

Методы:
  - `render(data?: Partial<TSequentialProduct>): HTMLElement` - Отрисовывает компонент с переданными данными о товаре в корзине.

### Класс Gallery
  - `Gallery` — компонент галереи товаров, предназначенный для отображения списка товаров переданный список DOM‑элементов товаров. Наследует класс `Component<IGallery>`.

Используемые интерфейсы и типы:
  - `IGallery` - Интерфейс, описывающий структуру данных галереи. Импортируется из `../../types`.
  - `TGallery` - Тип, описывающий данные галереи, включая массив productList с DOM‑элементами товаров. Импортируется из `../../types`.
  - `Component<IGallery>` - Базовый класс для компонентов интерфейса. Импортируется из `../base/Component`.

Конструктор:
  - `constructor(container: HTMLElement)` - `container: HTMLElement`корневой элемент DOM, в котором размещается компонент.

Методы:
  - `render(data?: Partial<TGallery> | undefined): HTMLElement` -  частично заполненные данные о галерее товаров (опционально). Должны содержать массив productList с DOM‑элементами товаров.

### Класс Basket
  - `Basket` — компонент корзины покупок, отображающий список товаров в корзине, общую стоимость заказа, кнопку оформления заказа. Обеспечивает обновление списка товаров, отображение итоговой суммы, управление активностью кнопки оформления заказа, отправку события открытия формы заказа. Наследует класс      `Component<IBasket>`.

Используемые интерфейсы, типы и константы:
  - `IBasket` - Интерфейс, описывающий структуру данных корзины. Импортируется из `../../types`.
  - `TBasketListAndOrderTotal` - Тип, описывающий данные корзины, включая список товаров (productItems) и итоговую сумму (orderTotal). Импортируется из `../../types`.
  - `CURRENCY` - Константа, определяющая валюту для отображения цены. Импортируется из `../../utils/constants`.
  - `EventTopic` - Константа, определяющая события (в частности, ORDER_FORM_OPEN). Импортируется из `../../utils/constants`.
  - `ensureElement` - Утилитарная функция для поиска и проверки DOM‑элементов. Импортируется из `../../utils/utils`.
  - `Component<IBasket>` - Базовый класс для компонентов интерфейса. Импортируется из `../base/Component`.
  - `IEvents` - Интерфейс системы событий для коммуникации между компонентами. Импортируется из `../base/Events`.

Конструктор:
  - `constructor(private events: IEvents, container: HTMLElement)` - `events: IEvents` экземпляр системы событий для коммуникации между компонентами, `container: HTMLElement` корневой элемент DOM, в котором размещается компонент.

Поля класса:
  - `basketListElement: HTMLElement` - Элемент DOM, содержащий список товаров в корзине. Соответствует селектору `basket__list` внутри контейнера компонента.
  - `basketButtonElement: HTMLButtonElement` - Элемент DOM кнопка оформления заказа. Соответствует селектору `basket__button` внутри контейнера компонента.
  - `basketPriceElement: HTMLElement` - Элемент DOM, отображающий общую стоимость заказа. Соответствует селектору `basket__price` внутри контейнера компонента.
  - `events: IEvents` - Экземпляр системы событий для коммуникации между компонентами.
  - `container: HTMLElement` (унаследовано от `Component`) Корневой элемент DOM, в котором размещается компонент.

Методы:
  - `basketButtonEnable(): void` - Активирует кнопку оформления заказа (снимает атрибут disabled).
  - `basketButtonDisable(): void` - Деактивирует кнопку оформления заказа (добавляет атрибут disabled).
  - `render(data?: Partial<TBasketListAndOrderTotal>): HTMLElement` - Отрисовывает компонент с переданными данными о корзине.

### Класс Modal
  - `Modal` — компонент модального окна, обеспечивающий отображение произвольного содержимого, закрытие по клику на кнопку закрытия, закрытие по клику на затемнённую область вокруг содержимого, управление видимостью окна (открытие/закрытие). Наследует класс `Component<IModal>`.

Используемые интерфейсы, типы и утилиты:
  - `IModal` - Интерфейс, описывающий данные для компонента `Modal`. Содержит поле `content` (элемент DOM с содержимым окна).
  - `ensureElement` - Утилитарная функция для поиска и проверки DOM‑элементов. Импортируется из `../../utils/utils`.
  - `Component<IModal>` - Базовый класс для компонентов интерфейса. Импортируется из `../base/Component`.
  - `IEvents` - Интерфейс системы событий для коммуникации между компонентами. Импортируется из `../base/Events`.

Конструктор:
  - `constructor(private event: IEvents, container: HTMLElement)` - `event: IEvents` экземпляр системы событий для коммуникации между компонентами, `container: HTMLElement` корневой элемент DOM, в котором размещается компонент.

Поля класса:
  - `closeButtonElement: HTMLButtonElement` - Элемент DOM кнопка закрытия модального окна. Соответствует селектору `modal__close` внутри контейнера компонента.
  - `content: HTMLElement` - Элемент DOM, в который вставляется содержимое модального окна. Соответствует селектору `modal__content` внутри контейнера компонента.
  - `event: IEvents` - Экземпляр системы событий для коммуникации между компонентами
  - `container: HTMLElement` -  (унаследовано от `Component`) Корневой элемент DOM, в котором размещается компонент.

Методы:
  - `emitCloseModal(): void`(private) - Отправляет событие о закрытии модального окна через систему событий.
  - `open(content: HTMLElement): void` - Открывает модальное окно и вставляет указанное содержимое. `content: HTMLElement` элемент DOM, который будет отображён внутри модального окна.
  - `close(): void` - Закрывает модальное окно.

### Абстрактный базовый класс Form
  - `Form` — абстрактный базовый класс для форм, обеспечивающий управление активностью кнопки отправки, отображение сообщений об ошибках, базовую логику отрисовки формы. Предназначен для наследования конкретными реализациями форм. Наследует класс `Component<IFormError>`.

Используемые интерфейсы и утилиты:
  - `IFormError` - Интерфейс, описывающий данные об ошибках формы. Импортируется из `../../../types`.
  - `ensureElement` - Утилитарная функция для поиска и проверки DOM‑элементов. Импортируется из `../../../utils/utils`.
  - `Component<IFormError>` - Базовый класс для компонентов интерфейса. Импортируется из `../../base/Component`.

Конструктор:
  - `constructor(container: HTMLElement)` - `container: HTMLElement` корневой элемент DOM, в котором размещается форма.

Поля класса
  - `submitButtonElement: HTMLButtonElement` - Элемент DOM кнопка отправки формы. Соответствует селектору `button[type="submit"]` внутри контейнера компонента.
  - `formErrorsElement: HTMLElement` - Элемент DOM, отображающий сообщения об ошибках формы. Соответствует селектору `form__errors` внутри контейнера компонента.
  - `container: HTMLElement` - (унаследовано от `Component`) Корневой элемент DOM, в котором размещается компонент.

Методы:
    - `enableSubmit(): void` - Активирует кнопку отправки формы.
    - `disableSubmit(): void` - Деактивирует кнопку отправки формы.
    - `setMessageError(message: string): void` - Устанавливает текстовое сообщение об ошибке в форме.
    - `render(data?: Partial<IFormError> | undefined): HTMLElement` - Отрисовывает форму с переданными данными.

### Класс OrderForm
  - `OrderForm` — компонент формы заказа, расширяющий базовый класс `Form`. Обеспечивает выбор способа оплаты (онлайн/наличными), ввод адреса доставки, отправку данных формы ,визуальное выделение выбранного способа оплаты, обработку изменений полей и отправку событий. Наследует класс `Form`.

Используемые интерфейсы, типы и константы:
  - `IFormError` - Интерфейс, описывающий данные об ошибках формы. Импортируется из `../../../types`.
  - `TFormData` - Тип, описывающий данные формы (способ оплаты и адрес). Импортируется из `../../../types`.
  - `EventTopic` - Константа, определяющая события. Импортируется из `../../../utils/constants`.
  - `ensureElement` - Утилитарная функция для поиска и проверки DOM‑элементов. Импортируется из `../../../utils/utils`.
  - `IEvents` - Интерфейс системы событий для коммуникации между компонентами. Импортируется из `../../base/Events`.
  - `Form` - Базовый класс для форм. Импортируется из `./Form`.

Конструктор
  - `constructor(private events: IEvents, container: HTMLElement)` - `events: IEvents` экземпляр системы событий для коммуникации между компонентами, `container: HTMLElement` корневой элемент DOM, в котором размещается форма.

Поля класса:
  - `onlineButtonElement: HTMLButtonElement` - Элемент DOM кнопка выбора оплаты онлайн. Соответствует селектору `button[name="card"]` внутри контейнера формы.
  - `cashButtonElement: HTMLButtonElement` - Элемент DOM кнопка выбора оплаты наличными. Соответствует селектору `button[name="cash"]` внутри контейнера формы.
  - `addressElement: HTMLInputElement`- Элемент DOM поле ввода адреса доставки. Соответствует селектору `input[name="address"]` внутри контейнера формы.
  - `events: IEvents` - Экземпляр системы событий для коммуникации между компонентами
Поля, унаследованные от Form: `submitButtonElement: HTMLButtonElement`, `formErrorsElement: HTMLElement`,`container: HTMLElement`.

Методы:
  - `paymentOnline(status: boolean): void` - Визуально выделяет кнопку выбора оплаты онлайн. При активации снимает выделение с кнопки оплаты наличными.
  - `paymentCash(status: boolean): void` - Визуально выделяет кнопку выбора оплаты наличными. При активации снимает выделение с кнопки оплаты онлайн.
  - `render(data?: Partial<IFormError>): HTMLElement` - Отрисовывает форму с переданными данными.

### Класс ContactsForm
  - `ContactsForm` — компонент формы контактов, расширяющий базовый класс `Form`. Обеспечивает ввод email и номера телефона, отправку данных формы,обработку изменений полей и отправку событий при вводе, восстановление значений полей из переданных данных. Наследует класс `Form`.

Используемые интерфейсы, типы и константы:
  - `IFormError` - Интерфейс, описывающий данные формы и об ошибках формы. Импортируется из `../../../types`.
  - `TFormData` - Тип, описывающий данные формы (email, телефон и др.). Импортируется из .`./../../types`.
  - `EventTopic` - Константа, определяющая события. Импортируется из `../../../utils/constants`.
  - `ensureElement` - Утилитарная функция для поиска и проверки DOM‑элементов. Импортируется из `../../../utils/utils`.
  - `IEvents` - Интерфейс системы событий для коммуникации между компонентами. Импортируется из `../../base/Events`.
  - `Form` - Базовый класс для форм. Импортируется из `./Form`.

Конструктор:
  - `constructor(private events: IEvents, container: HTMLElement)` - `events: IEvents` экземпляр системы событий для коммуникации между компонентами, `container: HTMLElement` корневой элемент DOM, в котором размещается форма.

Поля класса:
  - `emailElement: HTMLInputElement` - Элемент DOM поле ввода email. Соответствует селектору `input[name="email"]` внутри контейнера формы.
  - `phoneElement: HTMLInputElement` - Элемент DOM поле ввода номера телефона. Соответствует селектору `input[name="phone"]` внутри контейнера формы.
  - `events: IEvents` - Экземпляр системы событий для коммуникации между компонентами.
Поля, унаследованные от `Form` - `submitButtonElement: HTMLButtonElement`, `formErrorsElement: HTMLElement`, `container: HTMLElement`.

Методы:
  - `render(data?: Partial<IFormError>): HTMLElement` - Отрисовывает форму с переданными данными.

### Класс SuccessForm
  - `SuccessForm` — компонент успешного завершения заказа, отображающий сообщение об успешном оформлении заказа, возможность закрытия модального окна при клике. Предназначен для информирования пользователя о завершении процесса заказа. Наследует класс `Component<ISuccess>`.

Используемые интерфейсы, типы и константы:
  - `ISuccess` - Интерфейс, описывающий структуру данных успешного завершения заказа. Импортируется из `../../../types`.
  - `TSuccessData` - Тип, описывающий данные успеха. Импортируется из `../../../types`.
  - `EventTopic` - Константа, определяющая события. Импортируется из `../../../utils/constants`.
  - `ensureElement` - Утилитарная функция для поиска и проверки DOM‑элементов. Импортируется из `../../../utils/utils`.
  - `Component<ISuccess>` - Базовый класс для компонентов интерфейса. Импортируется из `../../base/Component`.
  - `IEvents` - Интерфейс системы событий для коммуникации между компонентами. Импортируется из `../../base/Events`.

Конструктор:
  - `constructor(protected events: IEvents, container: HTMLElement)` - `events: IEvents` экземпляр системы событий для коммуникации между компонентами, `container: HTMLElement` корневой элемент DOM, в котором размещается компонент.

Поля класса:
  - `orderSuccessDescriptionElement: HTMLElement` - Элемент DOM, отображающий описание успеха. Соответствует селектору `order-success__description` внутри контейнера компонента.
  - `events: IEvents` - Экземпляр системы событий для коммуникации между компонентами
  - `container: HTMLElement` - (унаследовано от Component) Корневой элемент DOM, в котором размещается компонент

Методы:
  - `render(data?: Partial<TSuccessData>): HTMLElement` - Отрисовывает компонент с переданными данными. Параметр `data?: Partial<TSuccessData>` частично заполненные данные об успехе (опционально). Могут содержать поле description с текстом сообщения.

## События Event
  - Используется для унификации событий в системе событий (брокере сообщений).

### Работа с товаром
  - `PRODUCT_RECEIVED` ('`product:received`') — изменение каталога товаров.
  - `PRODUCT_SELECT_CARD` ('`product:selectCard`') — выбор карточки товара.
  - `PRODUCT_SELECTED` ('`product:selected`') — открытие карточки товара для просмотра.
  - `PRODUCT_SUBMIT` ('`product:submit`') — добавление/удаление товара в корзине.

### Корзина
  - `BASKET_OPEN` ('`basket:open`') — открытие корзины.
  - `BASKET_PRODUCT_REMOVE` ('`basket:productRemove`') — удаление товара из корзины.
  - `BASKET_LIST_UPDATE` ('`basket:listUpdate`') — обновление списка товаров в корзине.
  - `BASKET_ORDER` ('`basket:order`') — оформление заказа из корзины.

### Форма оформления заказа (способ оплаты, адрес)
  - `ORDER_FORM_OPEN` ('`orderForm:open`') — открытие формы.
  - `ORDER_FORM_ONLINE_METHOD_SELECT` ('`orderForm:paymentOnlineSelect`') — выбор способа оплаты онлайн.
  - `ORDER_FORM_CASH_METHOD_SELECT` ('`orderForm:paymentCashSelect`') — выбор способа оплаты при получении.
  - `ORDER_FORM_ADDRESS_INPUT` ('`orderForm:addressInput`') — ввод адреса доставки.
  - `ORDER_FORM_SUBMIT` ('`orderForm:submit`') — отправка формы заказа.
  - `ORDER_FORM_VALIDATION_ERROR` ('`orderForm:validationError`') — ошибка валидации данных формы.

### Форма контактов (email, телефон)
  - `CONTACT_FORM_EMAIL_INPUT` ('`contactForm:emailInput`') — ввод email.
  - `CONTACT_FORM_PHONE_INPUT` ('`contactForm:phoneInput`') — ввод телефона.
  - `CONTACT_FORM_SUBMIT` ('`contactForm:submit`') — отправка формы контактов.
  - `CONTACT_FORM_VALIDATION_ERROR` ('`orderForm:validationError`') — ошибка валидации данных формы (примечание: возможно, опечатка в имени события).

### Модальные окна
  - `MODAL_CLOSE` ('`modal:close`') — закрытие модального окна.
  - `SUCCESS_MODAL_CLOSE` ('`successModal:close`') — закрытие модального окна с подтверждением успеха после отправки формы.

## Констант

### Константы стоимости и валюты
  - `CURRENCY` - обозначение денежной единицы. Использование: отображается в интерфейсе (например, «100 синапсов»).
  - `PRICE_UNAVAILABLE` - текст для товаров с отсутствующей ценой (null). Использование: отображается вместо цены в карточке товара.

### Константы для текста кнопок
  - `BUTTON_TEXT_UNAVAILABLE` = 'Недоступно' - текст кнопки для товара с null в цене. Использование: в карточке товара вместо кнопки «Купить».
  - `BUTTON_TEXT_BUY` = 'Купить' - текст кнопки добавления товара в корзину. Использование: в карточке товара, если товар доступен.
  - `BUTTON_TEXT_REMOVE` = 'Удалить из корзины' - текст кнопки удаления товара из корзины. Использование: в карточке товара, для удаления товара из корзины.

## Презентер
  Данный код представляет собой основной модуль приложения, который инициализирует все ключевые компоненты и сервисы, устанавливает связи между моделями, представлениями и сервисами, настраивает обработку событий через централизованный `EventEmitter`.

### Структура и ключевые блоки
#### Импорты
Подклчаются:
 - стили (scss);
 - базовые классы (Api, EventEmitter);
 - сервисы (ApiService);
 - модели (ProductCatalog, ShoppingCart, Customer);
 - представления (Modal, Header, Gallery, Basket);
 - карточки и формы (ProductCard, PreviewCard, BasketCard, OrderForm, ContactsForm, SuccessForm);
 - менеджер заказов (OrderManager);
 - константы, типы и утилиты.

#### Получение DOM‑элементов
Определяются корневые элементы интерфейса:
  - `page` — основная страница;
  -  `headerView` — шапка;
  - `galleryView` — галерея товаров;
  - `modalView` — модальное окно.

#### Инициализация сервисов и системы событий
  - `api` — экземпляр API с базовым URL;
  - `apiService` — сервис для работы с API;
  - `eventEmitter` — централизованный эмиттер событий.

#### Создание представлений (views)
  - `gallery` — отображение списка товаров;
  - `modal` — модальное окно для диалогов;
  - `header` — шапка с счётчиком корзины.

#### Создание моделей данных
  - `productsModel` — каталог товаров;
  - `shoppingCart` — корзина покупок;
  - `customer` — данные покупателя.

#### Создание карточек и форм
  - `previewCard` — предпросмотр товара;
  - `basket` — корзина;
  - `orderForm` — форма заказа (способ оплаты, адрес);
  - `contactsForm` — форма контактов (email, телефон);
  - `successForm` — сообщение об успехе.

#### Создание менеджера заказов
`orderManager` связывает:
  - сервис API;
  - модели клиента и корзины;
  - модальное окно и форму успеха;
  - шапку для обновления счётчика.

### Обработка событий (EventEmitter)
  - Основная логика строится на событийной модели. Ниже — ключевые события и их обработка.

#### PRODUCT_RECEIVED ('`product:received`') — изменение каталога товаров.
  - Загружает список товаров из `productsModel`.
  - Создаёт карточки `ProductCard` для каждого товара.
  - Передаёт данные в gallery для отображения.

#### PRODUCT_SELECT_CARD ('`product:selectCard`') — выбор карточки товара.
  - Получает выбранный товар по ID.
  - Определяет текст кнопки (BUY / REMOVE / UNAVAILABLE).
  - Отображает предпросмотр в previewCard.
  - Сохраняет выбранный товар в `productsModel`.

#### PRODUCT_SELECTED ('`product:selected`') — открытие карточки товара для просмотра.
  - Открывает предпросмотр товара в модальном окне.
  - Определяет текст кнопки («Купить», «Удалить», «Недоступно»).

#### PRODUCT_SUBMIT ('`product:submit`') — добавление/удаление товара в корзине.
  - Добавляет/удаляет товар в корзине.
  - Обновляет счётчик в шапке.
  - Закрывает модальное окно.

#### BASKET_LIST_UPDATE ('`basket:listUpdate`') — обновление списка товаров в корзине.
  - Формирует список карточек BasketCard для товаров в корзине.
  - Передаёт данные в basket (включая общую сумму).

#### BASKET_OPEN ('`basket:order`') — оформление заказа из корзины.
  - Открывает модальное окно с корзиной.

#### BASKET_PRODUCT_REMOVE ('`basket:productRemove`') — удаление товара из корзины.
  - Удаляет товар из корзины.
  - Обновляет счётчик и общую сумму.
  - Активирует/деактивирует кнопку заказа в зависимости от наличия товаров.

#### ORDER_FORM_OPEN ('`orderForm:open`') — открытие формы.
  - Открывает форму заказа с текущими данными клиента.

#### ORDER_FORM_ADDRESS_INPUT ('`orderForm:addressInput`') — ввод адреса доставки.
  - Сохраняет введённый адрес в модели клиента.

#### ORDER_FORM_ONLINE_METHOD_SELECT ('`orderForm:paymentOnlineSelect`') выбор способа оплаты онлайн.
  - Устанавливает выбранный способ оплаты в форме и модели.

#### ORDER_FORM_CASH_METHOD_SELECT ('`orderForm:paymentCashSelect`') — выбор способа оплаты при получении.
  - Устанавливает выбранный способ оплаты в форме и модели.

#### ORDER_FORM_SUBMIT ('`orderForm:submit`') — отправка формы заказа.
  - Предотвращает отправку формы.
  - Открывает форму контактов.
  - Разрешает отправку формы контактов.

#### ORDER_FORM_VALIDATION_ERROR ('`orderForm:validationError`') — ошибка валидации данных формы.
  - Валидирует поля формы заказа (адрес, способ оплаты).
  - Показывает ошибки, блокирует кнопку отправки при ошибках.

#### CONTACT_FORM_EMAIL_INPUT ('`contactForm:emailInput`') — ввод email.
  - Сохраняет введённые email в модели клиента.

#### CONTACT_FORM_PHONE_INPUT ('`contactForm:phoneInput`') — ввод телефона.
  - Сохраняет введённые телефон в модели клиента.

#### CONTACT_FORM_VALIDATION_ERROR ('`orderForm:validationError`') — ошибка валидации данных формы
  - Валидирует поля формы контактов (email, телефон).
  - Показывает ошибки, блокирует кнопку отправки при ошибках.

#### CONTACT_FORM_SUBMIT ('`contactForm:submit`') — отправка формы контактов.
  - Предотвращает отправку формы.
  - Запускает отправку заказа через orderManager.submitOrder().

#### SUCCESS_MODAL_CLOSE ('`successModal:close`') — закрытие модального окна.
  - Закрывает модальное окно после успеха.

#### MODAL_CLOSE ('`modal:close`') — закрытие модального окна.
  - Общее событие для закрытия модального окна.

### Ключевые процессы
#### Загрузка товаров
  - apiService.getProducts() → productsModel.setProductList() → событие PRODUCT_RECEIVED → отображение в gallery.

#### Выбор товара
  - Клик по карточке → PRODUCT_SELECT_CARD → сохранение в модели → PRODUCT_SELECTED → предпросмотр в модальном окне.

#### Работа с корзиной
  - Добавление/удаление товара → PRODUCT_SUBMIT → обновление корзины и счётчика.
  - Открытие корзины → BASKET_OPEN → отображение списка и суммы.

#### Оформление заказа
  - Открытие формы заказа → ввод данных → валидация → переход к форме контактов → валидация → отправка заказа через orderManager.

#### Успешная отправка
  - orderManager.handleSuccess() → открытие successForm → очистка корзины и данных → обнуление счётчика.

### Зависимости и связи
  - Модели (`ProductCatalog`, `ShoppingCart`, `Customer`) хранят данные и транслируют события при изменениях.
  - Представления (`Gallery`, `Modal`, `Header`, `Basket`) отображают данные и генерируют события.
  - Формы (`OrderForm`, `ContactsForm`, `SuccessForm`) собирают данные и транслируют события.
  - Сервисы (`ApiService`, `OrderManager`) выполняют бизнес‑логику (запрос API, отправка заказа).
  - `EventEmitter` связывает все компоненты, обеспечивая слабую связность.